<% @task = Task.find(answer.task_id) %>
<%= form_tag("/update_answer/#{answer.id}", method: "post", remote: true) do |f| %>

    <% if @task.kind == "single" %>
        <div class="options">
            <% @task.options_arr.each_with_index do |o, i| %>

                <% if answer.value.to_i == (i + 1) %>
                    <label><input type='radio' name='answer_value' value='<%= i + 1 %>' checked/><%= o %></label>
                <% else %>
                    <label><input type='radio' name='answer_value' value='<%= i + 1 %>'/><%= o %></label>
                <% end %>

            <% end %>
        </div>

    <% elsif @task.kind == "multiple" %>
        <div>Choose all that applies.</div>
        <div class="options">
            <% options = @task.options_arr %>
            <input type="hidden" name="multiple" value="<%= options.length %>" />
            <% options.each_with_index do |o, i| %>

                <% if answer.value_array.include?(i + 1) %>
                    <label><input type='checkbox' name='answer_values[]' value='<%= i + 1 %>' checked /><%= o %></label>
                <% else %>
                    <label><input type='checkbox' name='answer_values[]' value='<%= i + 1 %>' /><%= o %></label>
                <% end %>
                
                <% if o.include?("Other") %>
                     <input class="col-9 mb-1" type="text" name="other" placeholder="If you selected 'Others' please write it here" />
                <% end %>

            <% end %>
        </div>

    <% end %>

    <div class="action">
        <input type="hidden" name="time" value="0" />
        <%= submit_tag("Click to change your answer", :class => "btn") %>
    </div>
<% end %>